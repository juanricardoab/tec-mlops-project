schema: '2.0'
stages:
  data_load:
    cmd: python src/stages/data_load.py --config=params.yaml
    deps:
    - path: src/stages/data_load.py
      hash: md5
      md5: 8e570e18e3d6bd6bf9bf8ffc524952d2
      size: 726
    params:
      params.yaml:
        base:
          seed: 42
          fileNumber: 275
  data_clean:
    cmd: python src/stages/data_clean.py --config=params.yaml
    deps:
    - path: data/raw/bike.csv
      hash: md5
      md5: e9c213554af44ce7c6c4aba4b549fa85
      size: 1237473
    - path: src/stages/data_clean.py
      hash: md5
      md5: 145f809ade590f6bb03c32455441bb35
      size: 1339
    params:
      params.yaml:
        data_load:
          day_csv: data/raw/day.csv
          hour_csv: data/raw/hour.csv
          bike_csv: data/raw/bike.csv
          continuous_variable:
          - temp
          - atemp
          - hum
          - windspeed
          - casual
          - registered
          categorical_variable:
          - season
          - yr
          - mnth
          - hr
          - holiday
          - weekday
          - workingday
          - weathersit
          dependent_variable:
          - cnt
    outs:
    - path: data/processed/bike_cleaned.csv
      hash: md5
      md5: bef1c8af5056d4c9f1d87882114f4848
      size: 1046296
  preprocess:
    cmd: python src/stages/preprocess.py --config=params.yaml
    deps:
    - path: src/stages/preprocess.py
      hash: md5
      md5: 0cf6ce4fb9f1c916c4c044a5001b4d33
      size: 2177
    params:
      params.yaml:
        data_clean:
          clean_csv: data/processed/bike_cleaned.csv
        preprocess:
          x: data/processed/X.csv
          y: data/processed/y.csv
    outs:
    - path: data/processed/X.csv
      hash: md5
      md5: ff08fa379eeaecc9afc803f0868b9295
      size: 727696
    - path: data/processed/y.csv
      hash: md5
      md5: 45bd8d3b65dd086cec3b3dc47e1f6a7e
      size: 60685
  split:
    cmd: python src/stages/split.py --config=params.yaml
    deps:
    - path: data/processed/X.csv
      hash: md5
      md5: ff08fa379eeaecc9afc803f0868b9295
      size: 727696
    - path: data/processed/y.csv
      hash: md5
      md5: 45bd8d3b65dd086cec3b3dc47e1f6a7e
      size: 60685
    - path: src/stages/preprocess.py
      hash: md5
      md5: 0cf6ce4fb9f1c916c4c044a5001b4d33
      size: 2177
    params:
      params.yaml:
        data_split:
          test_size: 0.2
          x_train: data/processed/x_train.csv
          y_train: data/processed/y_train.csv
          x_test: data/processed/x_test.csv
          y_test: data/processed/y_test.csv
        preprocess:
          x: data/processed/X.csv
          y: data/processed/y.csv
    outs:
    - path: data/processed/x_test.csv
      hash: md5
      md5: 7dc589e0f17ac0500ea8a99e48c096ad
      size: 627596
    - path: data/processed/x_train.csv
      hash: md5
      md5: e5e0d7af203ef3864ab0e46230263f80
      size: 2516613
    - path: data/processed/y_test.csv
      hash: md5
      md5: 8b7337b64737951ca951cbf229cec6de
      size: 79156
    - path: data/processed/y_train.csv
      hash: md5
      md5: f616e74f9da79368f275aa0353d6248a
      size: 316007
  train:
    cmd: python src/stages/train.py --config=params.yaml
    deps:
    - path: data/processed/x_test.csv
      hash: md5
      md5: 7dc589e0f17ac0500ea8a99e48c096ad
      size: 627596
    - path: data/processed/x_train.csv
      hash: md5
      md5: e5e0d7af203ef3864ab0e46230263f80
      size: 2516613
    - path: data/processed/y_test.csv
      hash: md5
      md5: 8b7337b64737951ca951cbf229cec6de
      size: 79156
    - path: data/processed/y_train.csv
      hash: md5
      md5: f616e74f9da79368f275aa0353d6248a
      size: 316007
    params:
      params.yaml:
        data_split:
          test_size: 0.2
          x_train: data/processed/x_train.csv
          y_train: data/processed/y_train.csv
          x_test: data/processed/x_test.csv
          y_test: data/processed/y_test.csv
        train:
          cv: 3
          estimator_name: logreg
          estimators:
            logreg:
              param_grid:
                C:
                - 0.001
                max_iter:
                - 100
                solver:
                - lbfgs
                multi_class:
                - multinomial
            svm:
              param_grid:
                C:
                - 0.1
                - 1.0
                kernel:
                - rbf
                - linear
                gamma:
                - scale
                degree:
                - 3
                - 5
          y_pred: data/processed/y_pred.csv
          model_path: models/lin_reg_model.pkl.joblib
